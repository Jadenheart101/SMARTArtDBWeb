<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Edit Project Image Button Fix</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ccc; }
        .btn { padding: 8px 16px; background: #007bff; color: white; border: none; cursor: pointer; margin: 5px; }
        .btn-primary { background: #007bff; }
        .btn-secondary { background: #6c757d; }
        .btn:hover { opacity: 0.8; }
        .project-image-container { border: 1px solid #ddd; padding: 15px; margin: 10px 0; }
        .image-management-controls { margin-bottom: 1rem; }
        .project-image-thumbnail { display: none; margin-top: 10px; }
        .project-image-thumbnail.show { display: block; }
        .thumbnail-actions { margin-top: 10px; }
        .gallery { display: none; background: #f5f5f5; padding: 20px; margin: 10px 0; border: 1px solid #ddd; }
        .gallery.show { display: block; }
        .gallery-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 10px; margin-top: 10px; }
        .gallery-image-item { border: 1px solid #ddd; padding: 10px; cursor: pointer; text-align: center; }
        .gallery-image-item:hover { background: #e9ecef; }
        .gallery-image-item img { width: 100%; height: 100px; object-fit: cover; }
    </style>
</head>
<body>
    <h1>Test Edit Project Image Button Fix</h1>
    
    <div class="test-section">
        <h2>Scenario 1: Project with No Image</h2>
        <p>Button should show "Add Image" and be clickable</p>
        
        <div class="project-image-container">
            <!-- Always visible image management button -->
            <div class="image-management-controls">
                <button type="button" class="btn btn-primary" onclick="changeEditProjectImage()">
                    <i class="fas fa-images"></i> <span id="editImageButtonText1">Add/Change Image</span>
                </button>
            </div>
            
            <!-- Hidden thumbnail (no image case) -->
            <div class="project-image-thumbnail" id="editProjectImageThumbnail1">
                <img id="editProjectThumbnailImg1" src="" alt="Project image">
                <div class="thumbnail-actions">
                    <button type="button" class="btn btn-secondary" id="editAddArtInfoBtn1">
                        Add Art Info
                    </button>
                </div>
            </div>
        </div>
        
        <div class="gallery" id="editImageGallery1">
            <div class="gallery-header">
                <h4>Choose an image from your gallery:</h4>
                <button type="button" class="btn btn-secondary" onclick="hideEditImageGallery1()">Cancel</button>
            </div>
            <div class="gallery-grid" id="editImageGalleryGrid1">
                <div class="gallery-image-item" onclick="selectEditImage1('1', 'https://via.placeholder.com/150', 'Test Image 1')">
                    <img src="https://via.placeholder.com/150" alt="Test Image 1">
                    <div>Test Image 1</div>
                </div>
                <div class="gallery-image-item" onclick="selectEditImage1('2', 'https://via.placeholder.com/200', 'Test Image 2')">
                    <img src="https://via.placeholder.com/200" alt="Test Image 2">
                    <div>Test Image 2</div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="test-section">
        <h2>Scenario 2: Project with Existing Image</h2>
        <p>Button should show "Change Image" and thumbnail should be visible</p>
        
        <div class="project-image-container">
            <!-- Always visible image management button -->
            <div class="image-management-controls">
                <button type="button" class="btn btn-primary" onclick="changeEditProjectImage2()">
                    <i class="fas fa-images"></i> <span id="editImageButtonText2">Change Image</span>
                </button>
            </div>
            
            <!-- Visible thumbnail (existing image case) -->
            <div class="project-image-thumbnail show" id="editProjectImageThumbnail2">
                <img id="editProjectThumbnailImg2" src="https://via.placeholder.com/300" alt="Current Project Image">
                <div class="thumbnail-actions">
                    <button type="button" class="btn btn-secondary" id="editAddArtInfoBtn2">
                        Add Art Info
                    </button>
                </div>
            </div>
        </div>
        
        <div class="gallery" id="editImageGallery2">
            <div class="gallery-header">
                <h4>Choose an image from your gallery:</h4>
                <button type="button" class="btn btn-secondary" onclick="hideEditImageGallery2()">Cancel</button>
            </div>
            <div class="gallery-grid" id="editImageGalleryGrid2">
                <div class="gallery-image-item" onclick="selectEditImage2('3', 'https://via.placeholder.com/250', 'Replacement Image 1')">
                    <img src="https://via.placeholder.com/250" alt="Replacement Image 1">
                    <div>Replacement Image 1</div>
                </div>
                <div class="gallery-image-item" onclick="selectEditImage2('4', 'https://via.placeholder.com/350', 'Replacement Image 2')">
                    <img src="https://via.placeholder.com/350" alt="Replacement Image 2">
                    <div>Replacement Image 2</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Test functions for scenario 1 (no image)
        function changeEditProjectImage() {
            console.log('üîÑ changeEditProjectImage called (Scenario 1)');
            const gallery = document.getElementById('editImageGallery1');
            if (gallery) {
                gallery.classList.add('show');
                console.log('‚úÖ Gallery shown for scenario 1');
            }
        }
        
        function hideEditImageGallery1() {
            const gallery = document.getElementById('editImageGallery1');
            if (gallery) {
                gallery.classList.remove('show');
                console.log('üîí Gallery hidden for scenario 1');
            }
        }
        
        function selectEditImage1(imageId, imageUrl, imageName) {
            console.log('üñºÔ∏è selectEditImage1 called with:', { imageId, imageUrl, imageName });
            
            // Show thumbnail
            const thumbnail = document.getElementById('editProjectImageThumbnail1');
            const thumbnailImg = document.getElementById('editProjectThumbnailImg1');
            const buttonText = document.getElementById('editImageButtonText1');
            
            if (thumbnail && thumbnailImg) {
                thumbnailImg.src = imageUrl;
                thumbnailImg.alt = imageName;
                thumbnail.classList.add('show');
                console.log('‚úÖ Thumbnail shown for scenario 1');
            }
            
            if (buttonText) {
                buttonText.textContent = 'Change Image';
                console.log('üîÑ Button text updated to "Change Image"');
            }
            
            hideEditImageGallery1();
            alert(`Selected: ${imageName} (ID: ${imageId})`);
        }
        
        // Test functions for scenario 2 (existing image)
        function changeEditProjectImage2() {
            console.log('üîÑ changeEditProjectImage called (Scenario 2)');
            const gallery = document.getElementById('editImageGallery2');
            if (gallery) {
                gallery.classList.add('show');
                console.log('‚úÖ Gallery shown for scenario 2');
            }
        }
        
        function hideEditImageGallery2() {
            const gallery = document.getElementById('editImageGallery2');
            if (gallery) {
                gallery.classList.remove('show');
                console.log('üîí Gallery hidden for scenario 2');
            }
        }
        
        function selectEditImage2(imageId, imageUrl, imageName) {
            console.log('üñºÔ∏è selectEditImage2 called with:', { imageId, imageUrl, imageName });
            
            // Update thumbnail
            const thumbnailImg = document.getElementById('editProjectThumbnailImg2');
            
            if (thumbnailImg) {
                thumbnailImg.src = imageUrl;
                thumbnailImg.alt = imageName;
                console.log('‚úÖ Thumbnail updated for scenario 2');
            }
            
            hideEditImageGallery2();
            alert(`Changed to: ${imageName} (ID: ${imageId})`);
        }
        
        console.log('üß™ Test page loaded. Both scenarios should show working buttons.');
    </script>
</body>
</html>
